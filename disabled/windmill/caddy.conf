automations.{$DOMAIN} {
	encode gzip

	header {
		# Enable cross-site filter (XSS) and tell browser to block detected attacks
		X-XSS-Protection "1; mode=block"
		# Disallow the site to be rendered within a frame (clickjacking protection)
		X-Frame-Options "DENY"
		# Prevent search engines from indexing (optional)
		X-Robots-Tag "none"
		# Server name removing
		-Server
	}

	# WebSocket connections for LSP (Language Server Protocol)
	reverse_proxy /ws/* windmill-lsp:3001

	# Main Windmill application
	reverse_proxy * windmill-server:8000

	tls {
		dns hetzner {$HETZNER_API_TOKEN}
	}
}